(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{895:function(e,t,n){"use strict";n.r(t),n.d(t,"NoteList",(function(){return z}));var r=n(0),o=n.n(r),a=n(874),i=n(8),c=n.n(i),l=n(110);function s(){return o.a.createElement("svg",{className:"icon-cloud-sync",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},o.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M16.69,21.5l0-3.6-3.6,0,1,1a2.23,2.23,0,0,1-3.53-.73L8.67,19a4.25,4.25,0,0,0,6.81,1.35Z"}),o.a.createElement("path",{d:"M12.55,12.29A4.23,4.23,0,0,0,9.13,14l-1-1,0,3.6,3.6,0-1.11-1.1a2.18,2.18,0,0,1,1.94-1.18,2.21,2.21,0,0,1,2.1,1.45l1.88-.67A4.22,4.22,0,0,0,12.55,12.29Z"}),o.a.createElement("path",{d:"M17.81,16.75v-2a2.34,2.34,0,0,0,.38,0,2.73,2.73,0,0,0-.38-5.43H16l0-1a3.85,3.85,0,0,0-7.59-.85l-.18.77H6.72a3.26,3.26,0,0,0-.65,6.45,2.94,2.94,0,0,0,.65.07v2a5.35,5.35,0,0,1-1-.11,5.26,5.26,0,0,1,1-10.41A5.84,5.84,0,0,1,12.11,2.5a5.92,5.92,0,0,1,5.75,4.79,4.73,4.73,0,0,1,.62,9.41A4.91,4.91,0,0,1,17.81,16.75Z"})))}function u(){return o.a.createElement("svg",{className:"icon-feed",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M2,8.667V12c5.515,0,10,4.485,10,10h3.333C15.333,14.637,9.363,8.667,2,8.667z M2,2v3.333 c9.19,0,16.667,7.477,16.667,16.667H22C22,10.955,13.045,2,2,2z M4.5,17C3.118,17,2,18.12,2,19.5S3.118,22,4.5,22S7,20.88,7,19.5 S5.882,17,4.5,17z"}))}function p(){return o.a.createElement("svg",{className:"icon-pinned",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},o.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M21.93,10.56,13.44,2.07,12,3.49,13.44,4.9,10.16,8.19l-8.09.9L7.79,14.8,2.84,19.75l1.41,1.41L9.2,16.21l5.71,5.72.9-8.09,3.29-3.28L20.51,12Zm-8,2.37-.51,4.64-7-7,4.64-.51,3.79-3.79,2.83,2.83Z"})))}var f=n(4),d=n(669),h=n.n(d),m=n(182),y=function(e,t){return e.length>0?e.reduce((function(e,t){var n=t.filter,r=t.replacer,o="string"==typeof n&&Object(m.b)(n),a=o&&o.length>0?new RegExp(Object(f.escapeRegExp)(o),"gi"):n;return h()(e,a,r)}),t).map((function(e,t){return e&&"string"!=typeof e?o.a.cloneElement(e,{key:t}):e})):t},g=function(e){return{filter:e,replacer:function(e){if(e.length)return o.a.createElement("span",{className:"search-match"},e)}}},b=n(337),v=n(202),w=n(123),E=n(155);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,r,a=j(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=P(t),o=void 0,(r="createdAt")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.createdAt=Date.now(),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t,n,r=this;(null===(t=e.note)||void 0===t?void 0:t.content)!==(null===(n=this.props.note)||void 0===n?void 0:n.content)&&this.props.invalidateHeight(),this.props.lastUpdated<1e3&&!this.updateScheduled&&(this.updateScheduled=setTimeout((function(){return r.forceUpdate()}),1e3))}},{key:"render",value:function(){var e=this.props,t=e.displayMode,n=e.hasPendingChanges,r=e.isOpened,a=e.lastUpdated,i=e.noteId,l=e.note,f=e.openNote,d=e.pinNote,h=e.searchQuery,w=e.style;if(!l)return o.a.createElement("div",null,"Couldn't find note");var E=Object(b.a)(l),N=E.title,O=E.preview,S=l.systemTags.includes("pinned"),j=!!l.publishURL,x=a-this.createdAt>1e3&&Date.now()-a<1200,P=c()("note-list-item",{"note-list-item-selected":r,"note-list-item-pinned":S,"note-recently-updated":x,"published-note":j}),D=c()("note-list-item-pinner",{"note-list-item-pinned":S}),k=Object(m.a)(h).map(g);return o.a.createElement("div",{style:w,className:P},o.a.createElement("div",{className:"note-list-item-status"},o.a.createElement("div",{className:D,tabIndex:0,onClick:function(){return d(i,!S)}},o.a.createElement(p,null)),o.a.createElement("div",{className:"note-list-item-pending-changes"},n&&o.a.createElement(s,null))),o.a.createElement("div",{className:"note-list-item-text theme-color-border",tabIndex:0,onClick:function(){return f(i)}},o.a.createElement("div",{className:"note-list-item-title"},o.a.createElement("span",null,y(k,Object(v.a)(N))),j&&o.a.createElement("div",{className:"note-list-item-published-icon"},o.a.createElement(u,null))),"expanded"===t&&O.length>0&&o.a.createElement("div",{className:"note-list-item-excerpt"},Object(v.a)(O).split("\n").map((function(e,t){return o.a.createElement(o.a.Fragment,{key:t},t>0&&o.a.createElement("br",null),y(k,e.slice(0,200)))}))),"comfy"===t&&O.length>0&&o.a.createElement("div",{className:"note-list-item-excerpt"},y(k,Object(v.a)(O).slice(0,200)))))}}])&&O(t.prototype,n),r&&O(t,r),i}(r.Component),C={openNote:w.a.ui.openNote,pinNote:w.a.data.pinNote},R=Object(l.b)((function(e,t){var n,r=t.noteId;return{displayMode:e.settings.noteDisplay,hasPendingChanges:E.c(e,r),isOpened:e.ui.openedNote===r,lastUpdated:null!==(n=e.simperium.lastRemoteUpdate.get(r))&&void 0!==n?n:-1/0,note:e.data.notes.get(r),searchQuery:e.ui.searchQuery}}),C)(k),L=n(343);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(s,e);var t,n,i,l=M(s);function s(){var e;I(this,s);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Z(W(e=l.call.apply(l,[this].concat(n))),"state",{heightCache:new a.c({defaultHeight:135,fixedWidth:!0,keyMapper:function(t){var n=e.props,r=n.filteredNotes,o=n.searchQuery,a=n.tagResultsFound;return 0===a&&0===r.length?"no-notes":0===o.length||0===a?r[t]:0===t?"tag-suggestions":1===t?"notes-header":r[t-2]}}),lastNoteDisplay:null,windowWidth:null}),Z(W(e),"list",Object(r.createRef)()),Z(W(e),"handleShortcut",(function(t){if(e.props.keyboardShortcuts){var n=t.ctrlKey,r=t.code,o=t.metaKey,a=t.shiftKey,i=e.props,c=i.isSmallScreen,l=i.showNoteList,s=n||o;return s&&a&&"KeyK"===r?(e.props.selectNoteAbove(),t.stopPropagation(),t.preventDefault(),!1):s&&a&&"KeyJ"===r?(e.props.selectNoteBelow(),t.stopPropagation(),t.preventDefault(),!1):c&&s&&a&&"KeyL"===r?(e.props.toggleNoteList(),t.stopPropagation(),t.preventDefault(),!1):!c||!l||"Enter"!==r||(e.props.openNote(),t.stopPropagation(),t.preventDefault(),!1)}})),Z(W(e),"toggleShortcuts",(function(t){t?window.addEventListener("keydown",e.handleShortcut,!0):window.removeEventListener("keydown",e.handleShortcut,!0)})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.toggleShortcuts(!0)}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.filteredNotes,i=t.hasLoaded,l=t.noteDisplay,s=t.onEmptyTrash,u=t.openedNote,p=t.searchQuery,f=t.showTrash,d=t.tagResultsFound,h=this.state.heightCache,m=function(e,t,n){return 0===t.length||0===n?e:["tag-suggestions","notes-header"].concat(K(e.length>0?e:["no-notes"]))}(n,p,d),y=m.findIndex((function(e){return e===u})),g=function(e,t){var n=t.heightCache;return function(t){var r=t.index,i=t.key,c=t.parent,l=t.style,s=e[r];return"no-notes"===s?o.a.createElement(a.b,{cache:n,columnIndex:0,key:"no-notes",parent:c,rowIndex:r},o.a.createElement("div",{className:"note-list is-empty",style:F(F({},l),{},{height:200})},o.a.createElement("span",{className:"note-list-placeholder"},"No Notes"))):"tag-suggestions"===s||"notes-header"===s?"tag-suggestions"===s?o.a.createElement(a.b,{cache:n,columnIndex:0,key:"tag-suggestions",parent:c,rowIndex:r},o.a.createElement(L.a,null)):o.a.createElement(a.b,{cache:n,columnIndex:0,key:"notes-header",parent:c,rowIndex:r},o.a.createElement("div",{className:"note-list-header"},"Notes")):o.a.createElement(a.b,{cache:n,columnIndex:0,key:i,parent:c,rowIndex:r},o.a.createElement(R,{invalidateHeight:function(){return n.clear(r,0)},noteId:s,style:l}))}}(m,{heightCache:h}),b=0===m.length,v=o.a.createElement("div",{className:"note-list-empty-trash theme-color-border"},o.a.createElement("button",{type:"button",className:"button button-borderless button-danger",onClick:s},"Empty Trash"));return o.a.createElement("div",{className:c()("note-list",{"is-empty":b})},b?o.a.createElement("span",{className:"note-list-placeholder"},i?"No Notes":"Loading Notes"):o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"note-list-items ".concat(l)},o.a.createElement(a.a,null,(function(t){var n=t.height,r=t.width;return o.a.createElement(a.d,{ref:e.list,estimatedRowSize:126,height:n,noteDisplay:l,notes:m,rowCount:m.length,rowHeight:h.rowHeight,rowRenderer:g,scrollToIndex:y,width:r})}))),f&&v))}}])&&T(t.prototype,n),i&&T(t,i),s}(r.Component);Z(z,"displayName","NoteList"),Z(z,"getDerivedStateFromProps",(function(e,t){return t.heightCache.clear(0),t.heightCache.clear(1),t.heightCache.clear(2),e.noteDisplay!==t.lastNoteDisplay||e.windowWidth!==t.windowWidth?(t.heightCache.clearAll(),{lastNoteDisplay:e.noteDisplay,windowWidth:e.windowWidth}):null}));var J={onEmptyTrash:w.a.ui.emptyTrash,openNote:w.a.ui.openNote,selectNoteAbove:w.a.ui.selectNoteAbove,selectNoteBelow:w.a.ui.selectNoteBelow,toggleNoteList:w.a.ui.toggleNoteList};t.default=Object(l.b)((function(e){return{hasLoaded:e.ui.hasLoadedNotes,isSmallScreen:E.b(e),keyboardShortcuts:e.settings.keyboardShortcuts,noteDisplay:e.settings.noteDisplay,filteredNotes:e.ui.filteredNotes,openedNote:e.ui.openedNote,openedTag:e.ui.openedTag,searchQuery:e.ui.searchQuery,showNoteList:e.ui.showNoteList,showTrash:e.ui.showTrash,tagResultsFound:e.ui.tagSuggestions.length,windowWidth:e.browser.windowWidth}}),J)(z)}}]);